# =============================================================================
# Aperture Configuration
# =============================================================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to version control

# -----------------------------------------------------------------------------
# Core
# -----------------------------------------------------------------------------
PORT=3456
NODE_ENV=development
SESSION_SECRET=change-me-to-a-random-string-at-least-32-chars
APP_BASE_URL=http://localhost:3456

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# For Docker: postgres://app:app@db:5432/aperture
# For local dev with Docker DB: postgres://app:app@localhost:5432/aperture
DATABASE_URL=postgres://app:app@db:5432/aperture

# -----------------------------------------------------------------------------
# OpenAI
# -----------------------------------------------------------------------------
OPENAI_API_KEY=
OPENAI_EMBED_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# Media Server
# -----------------------------------------------------------------------------
# Type: 'emby' or 'jellyfin'
MEDIA_SERVER_TYPE=emby
MEDIA_SERVER_BASE_URL=http://yourserver:8096
MEDIA_SERVER_API_KEY=

# Path where STRM files are written (inside container)
MEDIA_SERVER_STRM_ROOT=/strm

# Path mapping for absolute paths in STRM files
# This is the root path on your media server where media files are located
MEDIA_SERVER_LIBRARY_ROOT=/mnt/media

# -----------------------------------------------------------------------------
# STRM Library Config
# -----------------------------------------------------------------------------
AI_LIBRARY_NAME_PREFIX=AI Picks - 
AI_LIBRARY_PATH_PREFIX=/strm/aperture/

# -----------------------------------------------------------------------------
# Background Jobs (cron expressions)
# -----------------------------------------------------------------------------
# Movie sync: daily at 3 AM
SYNC_CRON=0 3 * * *

# Recommendations: daily at 4 AM
RECS_CRON=0 4 * * *

# Permission sync: daily at 5 AM
PERMS_CRON=0 5 * * *

# -----------------------------------------------------------------------------
# Runtime
# -----------------------------------------------------------------------------
# Run database migrations automatically on server start
RUN_MIGRATIONS_ON_START=true

