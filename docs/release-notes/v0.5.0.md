# Aperture v0.5.0 Release Notes

Hey everyone! ğŸ‘‹

This is a **major release** with significant UI improvements, new features for content discovery, enhanced personalization, and a completely restructured documentation system.

---

## âœ¨ New Features

### Collapsible Sidebar

The sidebar can now collapse to an icon-only view:

- **Toggle methods** â€” Click the hamburger icon, click the Aperture logo, or use keyboard shortcut
- **Tooltips** â€” Hover over icons in collapsed mode to see page names
- **Persistence** â€” Your collapsed/expanded preference is saved to your account and syncs across devices
- **Responsive** â€” Mobile drawer also respects your collapsed preference

### Grid & List Views Everywhere

Most content pages now offer both Grid and List views:

| Page                | List View Features                       |
| ------------------- | ---------------------------------------- |
| **Browse**          | Full metadata, synopsis, genres, ratings |
| **Recommendations** | Match scores, evidence trail             |
| **Top Picks**       | Viewer counts, play counts, watch status |
| **Discovery**       | Source badges, request status, genres    |
| **Watch History**   | Last watched, play counts, progress      |
| **Shows You Watch** | Next episode, days until, progress       |

**View Persistence** â€” Your preferred view mode is saved per page and remembered across sessions.

### Combined Browse Page

Movies and Series are now on a single Browse page with tabs:

- **Tab switching** â€” Toggle between Movies and Series tabs
- **Independent filters** â€” Each tab maintains its own filters and sort
- **Shared UI** â€” Consistent experience across content types

### Advanced Filters on Browse

The Browse page now has a powerful filtering system:

**Filter Panel** (click "Filters" button):

| Filter           | Movies | Series |
| ---------------- | ------ | ------ |
| Year Range       | âœ“      | âœ“      |
| Runtime          | âœ“      | â€”      |
| Seasons          | â€”      | âœ“      |
| Community Rating | âœ“      | âœ“      |
| Rotten Tomatoes  | âœ“      | âœ“      |
| Metacritic       | âœ“      | âœ“      |
| Content Rating   | âœ“      | âœ“      |
| Resolution       | âœ“      | â€”      |
| Status           | â€”      | âœ“      |

**Active filter chips** appear below the filter bar showing what's applied.

**Sticky filter bar** stays visible as you scroll for easy access.

### Sort Persistence

Your sort preferences on the Browse page are automatically saved:

- **Movies and Series** have independent sort settings
- **Sort options include:** Title, Year, Release Date, Rating, RT Score, Metacritic, Runtime, Seasons, Date Added
- Settings sync to your account and persist across sessions

### Filter Presets

Save your favorite filter combinations:

- **Save current filters** â€” Name and save any filter combination
- **Load presets** â€” One-click to apply saved filters
- **Manage presets** â€” Rename or delete from Settings â†’ Preferences
- **Per-content type** â€” Movies and Series presets are stored separately

### Combined Top Picks Page

Top Pick Movies and Top Pick Series are now on a single page with tabs:

- **Unified interface** â€” Same design as Browse
- **List view** â€” Shows viewer counts and play counts
- **Grid view** â€” Poster grid with rank badges

### Shows You Watch

A new page tracking TV series you're actively following:

- **Automatic tracking** â€” Series appear based on your watch activity
- **Upcoming episodes** â€” See next episode title and air date
- **Days until** â€” Countdown to next episode
- **Progress tracking** â€” Episodes watched vs total
- **Grid and List views** â€” Your preference is saved
- **Frontend caching** â€” 1-day TTL for performance

### Explore Page (AI Semantic Graph)

A completely new way to discover content through visual connections:

- **Search to seed** â€” Start with any title
- **AI-powered connections** â€” Finds thematic relationships
- **Breadcrumb navigation** â€” Track your exploration path
- **Hide watched toggle** â€” Focus on new content
- **Primary node highlighting** â€” Clear visual hierarchy
- **Color-coded edges** â€” Blue (cast), Green (crew), Orange (genre), Purple (theme)
- **Create playlists** â€” Save interesting discoveries

### Enhanced Watcher Identity

Your taste profile is now more powerful:

- **Embedding-powered analysis** â€” AI generates abstract taste descriptions
- **Watch history sources** â€” Exclude specific libraries from analysis
- **Franchise weights** â€” Adjust or delete detected franchises
- **Genre weights** â€” Fine-tune genre influence
- **Minimum franchise items** â€” Filter noise from small franchises
- **Reset functionality** â€” Clear all or per-media type

### Playlist Enhancements

Playlists page has been redesigned:

- **Poster collages** â€” Cards show preview of 4 items
- **Clickable cards** â€” View playlist contents in a dialog
- **Redesigned New Playlist dialog** â€” Modern design language
- **Item counts and descriptions** â€” More information at a glance

### Heart Rating on All List Views

The heart rating component is now available everywhere:

- **Consistent placement** â€” Same location on all list view items
- **Inline rating** â€” Rate without opening detail pages
- **Grid view overlay** â€” Hover to reveal (existing behavior preserved)
- **Fixed clickability** â€” Resolved issues with ratings being under overlays

### Navigation Improvements

- **Home â†’ Dashboard** â€” Renamed for clarity
- **Icon updates** â€” Explore uses hub icon, Discover uses compass
- **Search moved** â€” Now on right side of toolbar as icon button
- **Mobile improvements** â€” Centered logo, hamburger on left

### Discovery Improvements

- **Skeleton loaders** â€” Shows placeholders during refresh
- **Genre preservation** â€” Fixed missing genre names
- **Caching** â€” Frontend caching for performance
- **List view** â€” Full metadata display

---

## ğŸ”§ Technical Improvements

### User Sync Job

New dedicated job to automatically import users from your media server:

- **Automatic sync** â€” Runs every 30 minutes to detect new Emby/Jellyfin users
- **Manual sync button** â€” Click "Sync Users" on the Admin â†’ Users page for immediate import
- **Email sync** â€” Pulls email addresses from Emby Connect accounts (if users registered with email)
- **Admin status sync** â€” Keeps admin permissions in sync with your media server

### User Email Settings

Users can now manage their email in Settings â†’ Profile:

- **Email input** â€” Enter or update your email address
- **Auto-lock** â€” If you manually set your email, it won't be overwritten by media server sync
- **Notification opt-out** â€” Toggle email notifications on/off (placeholder for future features)
- **Sync from Emby Connect** â€” If your Emby Connect username is an email, it's automatically imported

### User Algorithm Weights

Users can now customize their own recommendation algorithm weights:

- **New Settings Tab** â€” "AI Algorithm" tab in User Settings
- **Override admin defaults** â€” Adjust weights for Movies and Series independently
- **Auto-normalizing** â€” Set any values you want; the backend automatically normalizes to 100%
- **Auto-save** â€” Changes save automatically as you adjust sliders

### Libraries Excluded from Global Search

AI-generated libraries are now **excluded from global search** in Emby/Jellyfin:

- ğŸ¿ AI Movie Recommendations
- ğŸ“º AI Series Recommendations
- ğŸ† Top Picks libraries
- ğŸ‘€ Shows You Watch libraries

### Library Default Sort: Date Added

AI recommendation libraries now **default to "Date Added" sort** (newest first).

### No Duplicates in Continue Watching

Aperture libraries no longer cause duplicate entries in Continue Watching through improved NFO file generation.

---

## ğŸ› Bug Fixes

### Library Options Fix (CollectionType Preservation)

Fixed a critical bug where AI-generated libraries were being created with incorrect collection types.

### Metadata Sync Fix

Fixed an issue where posters and metadata wouldn't update for movies/series that already existed.

### Top Picks Viewer Stats

Fixed an issue where Top Picks showed all zeros for viewer data when using MDBList source. Local watch data is now included regardless of popularity source.

### Rating Timestamps

Fixed an issue where all ratings showed today's date after a Trakt sync.

### AI Explanation Batch Size

The recommender now automatically adapts explanation generation based on your AI provider's context window.

### Watch History Sync

Full sync is now the default, ensuring all watched items are captured.

### Similar Content & Search Fix

Fixed database errors that broke similar content lists and semantic search.

### Genre Names on Discovery

Fixed an issue where genre names weren't rendering in Discovery list view.

---

## ğŸ¨ UI Improvements

### Settings Page Consistency

User Settings pages redesigned with:

- Card-based layout
- Dynamic accent colors (indigo for movies, pink for series)
- Debounced auto-save
- Clean slider labels

### Renamed Library Build Jobs

| Old Name              | New Name                        |
| --------------------- | ------------------------------- |
| Sync Movie Libraries  | Build Aperture Movie Libraries  |
| Sync Series Libraries | Build Aperture Series Libraries |

### Two-Column Recently Watched

Dashboard's Recently Watched now shows Movies and Series in separate columns.

### Improved Time Display

- Recently Watched shows months/years for older items
- Recent Ratings shows "Rated on Jan 11, 2026" format

---

## ğŸ“š Documentation

The documentation has been completely restructured:

- **New TOC format** â€” `user-guide.md` is now a table of contents
- **Individual feature docs** â€” 28 separate feature documentation files
- **Workflow-based organization** â€” From setup through advanced features
- **Comprehensive coverage** â€” Every page, setting, and feature documented

See the [User Guide](../user-guide.md) for the complete documentation index.

---

## ğŸš€ Update Instructions

### For Existing Docker Users

```bash
# Pull the latest image
docker compose pull

# Restart with new version
docker compose up -d
```

### For New Docker Users

```bash
# Pull the latest image
docker pull ghcr.io/your-org/aperture:latest

# Or use docker compose
docker compose up -d
```

### Post-Update Steps

1. **Clear browser cache** â€” Ensures you get the new UI
2. **Re-run library jobs** â€” If you want the latest library improvements
3. **Check your sidebar** â€” Collapse/expand to set your preference

---

## ğŸ“‹ Full Changelog

**UI/Navigation:**

- `feat: add collapsible sidebar with icon-only view and tooltips`
- `feat: persist sidebar collapsed state in database`
- `feat: make sidebar logo clickable to toggle collapse/expand`
- `style: rename Home to Dashboard in sidebar`
- `style: use compass icon for Discover, HubOutlined for Explore`
- `style: simplify search to icon button and move to right side`
- `style: center Aperture logo on mobile, move hamburger to left`
- `style: make Aperture logo larger and remove subheading`

**Browse Page:**

- `feat: consolidate sidebar navigation and combine Top Picks/Browse pages`
- `feat: enhance Browse page with list view, infinite scroll, and view persistence`
- `feat(browse): add sticky filters, sort persistence, and filter presets`

**View Modes:**

- `feat: persist view mode preferences per page`
- `style: standardize grid/list toggle placement across pages`
- `feat: add HeartRating to all list views for consistent rating experience`

**Shows You Watch:**

- `feat: add beautiful list view for Shows You Watch page`
- `perf: cache Shows You Watch data on frontend with 1-day TTL`

**Top Picks:**

- `feat: enhance Top Picks list view to match Discover page style`
- `fix: include local viewer stats when using MDBList popularity source`

**Discovery:**

- `feat: add caching and list view to Discover page`
- `feat: show skeleton loaders for missing genre data on Discovery page`
- `fix: preserve genre names from TMDb API for discovery list view`

**Watch History:**

- `feat: enhance Watch History list view to match Discover/Top Picks style`
- `fix: pass userRating and onRate props to MoviePoster on Watch History page`

**Playlists:**

- `feat: enhance playlists page with poster previews and clickable cards`
- `style: redesign New Playlist dialog with modern design language`

**Explore/Graph:**

- `feat(explore): AI analyzes item metadata to find real connections`
- `feat(explore): add breadcrumb navigation for drill-down`
- `feat(explore): add toggle to hide previously watched content`
- `feat(explore): highlight primary nodes with larger size and rank labels`
- `feat(ai): add Exploration provider for semantic graph generation`

**Watcher Identity:**

- `feat: embedding-powered taste analyzer for abstract profiles`
- `feat: add watch history library exclusions`
- `feat: add minimum franchise items filter setting`
- `fix: reset mode clears old franchise/genre records, add delete functionality`

**Infrastructure:**

- `feat: add user sync job with 30-min schedule`
- `feat: add user email settings`
- `feat: add user algorithm weights (AI Algorithm tab)`
- `fix(emby): merge library options instead of replacing`
- `fix(api): use dynamic embedding table names`
- `refactor(jobs): simplify watch history sync - always use full sync`

---

Enjoy the improvements! ğŸ¿
