# Aperture v0.5.3 Release Notes

Hey everyone! ðŸ‘‹

This release adds **OpenRouter support** as a new AI provider, along with custom model persistence and provider logo improvements.

---

## ðŸ¤– OpenRouter Provider Support

You can now use **OpenRouter** as your AI provider! OpenRouter gives you access to hundreds of models from different providers through a single API.

### How to Use

1. Go to **Admin â†’ Settings â†’ AI / LLM**
2. Select **OpenRouter** from the provider dropdown
3. Enter your API key from [openrouter.ai/keys](https://openrouter.ai/keys)
4. Click **Add Custom Model...** to enter any model name
5. Test the connection and save

### Custom Models Only

OpenRouter doesn't have a prebuilt model list â€” you enter the exact model ID you want to use:

- `anthropic/claude-3.5-sonnet`
- `openai/gpt-4o`
- `google/gemini-2.0-flash`
- `meta-llama/llama-3.3-70b-instruct`

Find available models at [openrouter.ai/models](https://openrouter.ai/models).

---

## ðŸ’¾ Custom Model Persistence

Custom models for **Ollama**, **OpenAI-Compatible**, and **OpenRouter** providers are now saved to the database.

### What This Means

- **Before** â€” Custom models were lost when you refreshed the page
- **After** â€” Custom models persist across sessions and server restarts

### Test Before Save

Custom models now require a successful connection test before they can be added. This prevents typos and ensures the model actually works.

---

## ðŸŽ¨ Provider Logos

The AI provider dropdown now shows actual provider logos instead of generic cloud icons.

| Provider | Logo |
|----------|------|
| OpenAI | âœ“ |
| Anthropic | âœ“ |
| Ollama | âœ“ |
| OpenRouter | âœ“ |
| Groq | âœ“ |
| DeepSeek | âœ“ |
| Google AI | âœ“ |

Logos automatically invert colors in dark mode for visibility.

---

## ðŸ§  Anthropic Model Updates

Added all current Claude models:

| Model | Description |
|-------|-------------|
| **Claude Opus 4.5** | Most capable. Extended thinking, web search, tool search, wildly expensive|
| **Claude Sonnet 4.5** | Best balance of speed and intelligence |
| **Claude Haiku 4.5** | Fast and efficient for high-volume tasks |
| **Claude Opus 4.1** | Previous generation flagship |
| **Claude Sonnet 4** | Balanced performance with tool use |
| **Claude 3.7 Sonnet** | Extended thinking support |
| **Claude 3.5 Sonnet** | Excellent for coding and analysis |
| **Claude 3.5 Haiku** | Fast and cost-effective |

---

### Docker SESSION_SECRET Fix

Fixed YAML parsing issues with `SESSION_SECRET` in docker-compose files by properly quoting the value.

---

## ðŸš€ Update Instructions

### For Docker Users

```bash
# Pull the latest image
docker compose pull

# Restart with new version
docker compose up -d
```

### Database Migration

The update includes a database migration (`0090_openrouter_provider.sql`) that runs automatically on startup.

### Post-Update Steps

1. **Clear browser cache** â€” Or hard refresh (Cmd+Shift+R / Ctrl+Shift+R)
---

## ðŸ“‹ Full Changelog

**OpenRouter Integration:**
- `feat: add @openrouter/ai-sdk-provider package`
- `feat: add OpenRouter to provider registry`
- `feat: add OpenRouter case to provider factory`
- `feat: update custom model support for OpenRouter`
- `feat: add database migration for OpenRouter`

**Custom Model Persistence:**
- `feat: persist custom AI models for Ollama and OpenAI-compatible providers`
- `fix: require test validation before adding custom models`

**Provider Logos:**
- `feat: add SVG logos for all AI providers`
- `feat: display provider logos in dropdown menus`
- `feat: support dark mode logo inversion`

**Anthropic Models:**
- `feat: add all current Claude models (Opus 4.5, Sonnet 4.5, Haiku 4.5, etc.)`
- `feat: update Anthropic logo to claude.svg`

**Bug Fixes:**
- `fix(nfo): restore real provider IDs for proper playback tracking`
- `fix: quote SESSION_SECRET in docker-compose files`

---

Enjoy OpenRouter support! ðŸš€
