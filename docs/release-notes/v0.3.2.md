# Aperture v0.3.2 Release Notes

Hey everyone! üëã

We've got a substantial update that improves the browsing experience, adds some visual polish, and includes a nice community contribution. Here's what's new:

---

## üé® Rotating Fanart Headers

Person and Studio detail pages now feature **rotating backdrop images** from their associated movies and TV series!

- Smooth crossfade transitions between images
- Shuffled on load for variety
- Dark gradient overlay ensures text remains readable
- Images preload before transitioning for seamless playback

This makes browsing actor filmographies and studio catalogs feel much more cinematic.

---

## üè¢ Studio & Network Logo Enrichment

A new background job fetches high-quality logos from TMDB for your studios and networks:

- **New Job:** `enrich-studio-logos` (runs daily at 5:30 AM by default)
- Downloads and stores logos locally for fast loading
- Logos now display on Studio/Network detail pages
- Falls back to Emby/Jellyfin images if no TMDB match found

Run the job manually from the Jobs page to enrich your existing studios immediately.

---

## üñºÔ∏è Media Image Proxy (Mixed Content Fix)

**The Problem:** If you're accessing Aperture through a reverse proxy with HTTPS (like most of us do), you've probably seen broken images or mixed content warnings. This happened because Aperture was loading images directly from your Emby/Jellyfin server over HTTP.

**The Fix:** All media server images now route through Aperture's new image proxy endpoint (`/api/media/images/*`). This means:

- No more mixed content warnings when using HTTPS
- Images load correctly even when accessing externally
- Aggressive caching (24h cache, 7-day stale-while-revalidate) for performance
- Automatic fallback to a placeholder when images fail to load

This applies to posters, backdrops, actor thumbnails, and all other media server images across the entire app.

---

## üé¨ Person & Studio Detail Pages

You can now click on actors, directors, studios, and networks throughout the app to see dedicated detail pages!

**Person Detail Pages** (`/person/:name`)

- Rotating fanart header from their filmography
- Profile image and name
- Carousel of movies they appear in
- Carousel of series they appear in (with "add to watching" button)
- Works for actors AND directors

**Studio Detail Pages** (`/studio/:name`)

- Rotating fanart header from their content
- Studio/network logo (from TMDB when available)
- Carousel of their movies
- Carousel of their series (with "add to watching" button)
- Works for production studios AND TV networks

**Where you can click:**

- Watch Stats page: Actors, Directors, Studios, Networks are all now clickable
- More click-through navigation coming in future updates

---

## üì± Mobile Responsive Fixes

Fixed horizontal scrolling issues on mobile devices (tested on iPhone 15):

- **Main Layout:** Added `overflow-x: hidden` and `maxWidth: 100%` to prevent content overflow
- **Page Headers:** Added `flexWrap` to headers on Recommendations, Top Picks pages so buttons wrap properly
- **Movies Filters:** Filter controls now stack vertically on mobile instead of overflowing
- **Quick Stats Bar:** Now displays as a 2x2 grid on mobile instead of a horizontal scroll
- **Settings Tabs:** Main tabs now scroll horizontally on mobile (7 tabs don't fit on small screens)
- **Poster Grids:** Responsive poster sizing ensures even spacing at all breakpoints (no more gutter issues)

The app should now feel much better on phones and tablets.

---

## ‚ö° Performance: Embeddings Bulk Insertion

**Community Contribution** by [@tcx4c70](https://github.com/tcx4c70) (PR #18)

The embedding generation jobs now use bulk insertion when writing to the vector database, resulting in approximately **10x faster** embedding insertion. This significantly speeds up the initial setup and any re-generation of movie/series embeddings.

Thanks Adam for the contribution! üôè

---

## Full Changelog

### New Features

- Add rotating fanart backdrop headers to Person and Studio detail pages
- Add studio/network logo enrichment job (`enrich-studio-logos`)
- Display TMDB logos on Studio/Network detail pages
- Add media image proxy endpoint for mixed content prevention
- Add Person detail page with filmography carousels
- Add Studio detail page with content carousels
- Make Watch Stats actors/directors/studios/networks clickable
- Add "watching" toggle button to series on Person/Studio detail pages

### Bug Fixes

- Fix mixed content warnings when accessing Aperture via HTTPS reverse proxy
- Fix horizontal scroll on mobile devices
- Fix responsive poster sizing for even grid spacing on mobile
- Fix React hooks error on detail pages (useMemo before early returns)
- Fix backdrop crossfade to use double-buffer approach for seamless transitions
- Apply image proxy to all remaining direct Emby/Jellyfin image URLs

### Performance

- **10x faster embedding insertion** via bulk insert (thanks @tcx4c70!)

### Technical

- New `/api/discover/person/:name` endpoint with backdrop URLs
- New `/api/discover/studio/:name` endpoint with backdrop URLs
- New `RotatingBackdrop` component with preloading and crossfade
- Added `enrich-studio-logos` to job scheduler defaults
- Added `useProxiedImageUrl` hook and `getProxiedImageUrl` utility
- Responsive breakpoints added to multiple components

---

As always, let me know if you run into any issues. Happy watching! üçø
