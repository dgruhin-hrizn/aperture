# Aperture v0.5.1 Release Notes

Hey everyone! ğŸ‘‹

This is a **mobile-focused release** with significant improvements to the mobile browsing experience across all list views.

---

## ğŸ“± Mobile UI Improvements

### Compact Horizontal List Items

All list view items have been redesigned for mobile with a compact horizontal layout inspired by Spotify and Netflix:

| Before | After |
|--------|-------|
| Stacked vertical cards | Horizontal poster + content layout |
| Large posters taking full width | Compact 100px posters maintaining aspect ratio |
| Hidden or truncated content | 2-line synopsis, inline metadata |
| Actions in separate panel | Inline action buttons |

**Pages updated:**
- Browse (Movies & Series)
- My Recommendations
- Top Picks
- Discover
- Watch History
- Shows You Watch

### Consistent Header Layout

The grid/list toggle is now **always in the upper right** of the header on mobile:

```
[Icon] Page Title            [âŠ][â˜°]
[Action buttons if any]
[Tabs/Filters]
```

This provides a consistent, predictable location for view switching across all pages.

### Decluttered Mobile Headers

Mobile headers are now cleaner and more focused:

- **Subtitles hidden** â€” Page descriptions hidden on mobile to save space
- **Icon-only action buttons** â€” Refresh, Sync, Add buttons show icons with tooltips
- **Reduced visual noise** â€” Focus on content, not chrome

### Shows You Watch Simplification

The Shows You Watch page received special attention:

- **Stats merged into tabs** â€” "All (70) | Airing (67) | Upcoming (23)" instead of separate chips
- **Icon-only Sync/Add buttons** â€” Compact with tooltips
- **Full-width filter tabs** â€” Easier to tap on mobile

### Purple & Pink Tab Styling

Consistent tab styling now applied across all tabbed pages:

- **Movies tab** â€” Purple (#6366f1) with matching count chips
- **Series tab** â€” Pink (#ec4899) with matching count chips
- **Applied to** â€” Discover, Recommendations, Watch History, Top Picks

### Watch History Sort Icons

Sort buttons on Watch History now show icons on mobile:

- ğŸ• Recent
- ğŸ“ˆ Most Played  
- ğŸ”¤ A-Z

Full labels still shown on desktop.

---

## ğŸ› Bug Fixes

### View Mode Persistence Fixed

Fixed a bug where view mode preferences weren't loading from the database:

- **Root cause** â€” Frontend was looking for `data.preferences.viewModes` but API returns `data.viewModes`
- **Result** â€” Your grid/list preferences now correctly load on page refresh

### No More View Mode Flash

Eliminated the brief flash of default grid view when your preference is list:

- **Solution** â€” View modes now cache in localStorage for instant loading
- **Sync** â€” Server remains source of truth, localStorage is just a fast cache
- **Result** â€” Page renders immediately with your saved preference

### My Recommendations View Persistence

Fixed the My Recommendations page to use the shared view mode system:

- **Before** â€” Used local state, preference wasn't saved
- **After** â€” Uses `useViewMode('recommendations')` hook
- **Result** â€” Your grid/list preference persists across sessions

---

## ğŸš€ Update Instructions

### For Docker Users

```bash
# Pull the latest image
docker compose pull

# Restart with new version
docker compose up -d
```

### Post-Update Steps

1. **Clear browser cache** â€” Or hard refresh (Cmd+Shift+R / Ctrl+Shift+R)
2. **Clear localStorage** (optional) â€” If you want a fresh start on view preferences

---

## ğŸ“‹ Full Changelog

**Mobile List Views:**
- `style(mobile): redesign list items with compact horizontal layout`
- `style(mobile): standardize poster size to 100px with aspect ratio preservation`
- `style(mobile): add 2-line synopsis truncation on all list items`
- `style(mobile): move actions inline within card content`

**Mobile Headers:**
- `style(mobile): position grid/list toggle in upper right on all pages`
- `style(mobile): hide subtitles on mobile for cleaner headers`
- `style(mobile): use icon-only action buttons with tooltips`

**Tab Styling:**
- `style: apply purple/pink tab colors to Discover, Recommendations, Watch History`
- `style: add icons to Watch History sort buttons`

**Shows You Watch:**
- `style(mobile): merge stats into filter tabs`
- `style(mobile): make filter tabs full-width`
- `style(mobile): use icon-only Sync/Add buttons`

**Bug Fixes:**
- `fix: correct API response path for view mode preferences`
- `fix: add localStorage caching to prevent view mode flash`
- `fix: use shared useViewMode hook in My Recommendations page`

---

Enjoy the mobile improvements! ğŸ“±
