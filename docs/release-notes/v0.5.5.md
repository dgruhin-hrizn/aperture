# Aperture v0.5.5 Release Notes

Hey everyone! ğŸ‘‹

This is a **bug fix release** that addresses two issues affecting new users during initial setup.

---

## ğŸ” SESSION_SECRET YAML Parsing Fix

Fixed an issue where random session secrets containing special characters (like `#`, `$`, `!`) would cause the container to fail with:

```
SESSION_SECRET: { _errors: [ 'String must contain at least 32 character(s)' ] }
```

### What Was Happening

YAML interprets `#` as the start of a comment. If your generated key contained `#`, everything after it was ignored:

```yaml
# Before: YAML sees only "abc123xyz" (9 chars) because #... is a comment
SESSION_SECRET: abc123xyz#789qwerty456asdf123zzzz
```

### The Fix

All docker-compose files now quote the `SESSION_SECRET` placeholder and include a warning comment:

```yaml
# âš ï¸  IMPORTANT: Keep the quotes! Special characters like # break YAML without them.
SESSION_SECRET: 'PASTE_YOUR_RANDOM_KEY_HERE'
```

**If you're hitting this issue:** Just wrap your SESSION_SECRET value in quotes.

---

## ğŸ›¡ï¸ Session Validation Error Handling

Fixed an issue where changing `SESSION_SECRET` (or other session-related issues) would cause a completely blank page with 500 errors.

### What Was Happening

The auth hook runs on **every request** â€” including static files like JavaScript bundles. If session validation failed (due to a changed secret, database issue, or corrupted cookie), it crashed the entire request, preventing the page from loading at all.

### The Fix

1. **Auth errors no longer crash requests** â€” Static files load normally even when session validation fails
2. **Helpful error message** â€” The login page now shows a warning explaining what happened:

   > "Your session was invalid. This can happen if the server was reconfigured. Please log in again."

3. **Automatic cookie cleanup** â€” Invalid session cookies are automatically cleared

---

## ğŸš€ Update Instructions

### For Docker Users

```bash
# Pull the latest image
docker compose pull

# Restart with new version
docker compose up -d
```

No database migrations in this release.

### Post-Update Steps

1. **Clear browser cache** â€” Or hard refresh (Cmd+Shift+R / Ctrl+Shift+R)

---

## ğŸ“‹ Full Changelog

**Bug Fixes:**
- `fix: quote SESSION_SECRET in docker-compose files to prevent YAML parsing issues`
- `fix: prevent auth hook errors from crashing static file requests`

**Improvements:**
- Session errors now show a user-friendly message on the login page
- Invalid session cookies are automatically cleared
- Added troubleshooting section to Windows Docker Desktop documentation

---

Thanks to **Ebr** from the Emby team for reporting these issues! ğŸ™
