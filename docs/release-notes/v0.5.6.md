# Aperture v0.5.6 Release Notes

Hey everyone! ğŸ‘‹

This is a **bug fix release** that resolves an issue with custom embedding models failing to run embedding jobs.

---

## ğŸ¤– Custom Embedding Model Dimensions Fix

Fixed an issue where custom embedding models (like Ollama's `qwen3-embedding:8b`) would fail with:

```
âŒ Job failed: No embedding model configured or dimensions unknown
```

### What Was Happening

When you add a custom embedding model, the embedding dimensions are stored in the database's `custom_ai_models` table. However, when running embedding jobs, the system only checked the hardcoded model registry for known models â€” it never looked up custom models from the database.

This meant custom embedding models would:
- âœ… Pass the connection test
- âœ… Show as configured in settings
- âŒ Fail when actually running any embedding job

### The Fix

The `getCurrentEmbeddingDimensions()` function now:
1. First checks built-in models from the hardcoded registry
2. If not found, queries the `custom_ai_models` table
3. Returns the embedding dimensions you specified when adding the model

### What's Now Working

All embedding-related functionality now works with custom models:
- âœ… Generate Movie Embeddings
- âœ… Generate Series Embeddings
- âœ… Generate Episode Embeddings
- âœ… Semantic Search
- âœ… Similarity Graphs
- âœ… Recommendations
- âœ… Taste Profiles
- âœ… AI Assistant queries

---

## ğŸš€ Update Instructions

### For Docker Users

```bash
# Pull the latest image
docker compose pull

# Restart with new version
docker compose up -d
```

No database migrations in this release.

---

## ğŸ“‹ Full Changelog

**Bug Fixes:**
- `fix: custom embedding models now correctly resolve dimensions from database`

---

If you were affected by this issue, your custom embedding model should now work â€” just re-run your embedding jobs! ğŸ‰
